syntax = "proto3";

package api.datastore.v1;

option go_package = "github.com/smartcontractkit/chainlink-protos/chainlink-catalog/v1/datastore";

import "chainlink-catalog/v1/datastore/address_reference.proto";
import "chainlink-catalog/v1/datastore/contract_metadata.proto";
import "chainlink-catalog/v1/datastore/chain_metadata.proto";
import "chainlink-catalog/v1/datastore/environment_metadata.proto";
import "chainlink-catalog/v1/datastore/transactions.proto";

service DeploymentsDatastore {
  rpc DataAccess (stream DataAccessRequest) returns (stream DataAccessResponse) {}
}

message ResponseStatus {
  bool succeeded = 1;
  string error = 2;
}

message DataAccessRequest {
  reserved 1;
  oneof operation {
    AddressReferenceFindRequest address_reference_find_request = 2;
    AddressReferenceEditRequest address_reference_edit_request = 3;
    ContractMetadataFindRequest contract_metadata_find_request = 4;
    ContractMetadataEditRequest contract_metadata_edit_request = 5;
    ChainMetadataFindRequest chain_metadata_find_request = 6;
    ChainMetadataEditRequest chain_metadata_edit_request = 7;
    EnvironmentMetadataFindRequest environment_metadata_find_request = 8;
    EnvironmentMetadataEditRequest environment_metadata_edit_request = 9;
    BeginTransactionRequest begin_transaction_request = 10;
    CommitTransactionRequest commit_transaction_request = 11;
    RollbackTransactionRequest rollback_transaction_request = 12;
  }
}

message DataAccessResponse {
  ResponseStatus status = 1;
  oneof response {
    AddressReferenceFindResponse address_reference_find_response = 2;
    AddressReferenceEditResponse address_reference_edit_response = 3;
    ContractMetadataFindResponse contract_metadata_find_response = 4;
    ContractMetadataEditResponse contract_metadata_edit_response = 5;
    ChainMetadataFindResponse chain_metadata_find_response = 6;
    ChainMetadataEditResponse chain_metadata_edit_response = 7;
    EnvironmentMetadataFindResponse environment_metadata_find_response = 8;
    EnvironmentMetadataEditResponse environment_metadata_edit_response = 9;
    BeginTransactionResponse begin_transaction_response = 10;
    CommitTransactionResponse commit_transaction_response = 11;
    RollbackTransactionResponse rollback_transaction_response = 12;
  }
}

