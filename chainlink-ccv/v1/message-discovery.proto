syntax = "proto3";

package chainlink_ccv.v1;

import "chainlink-ccv/v1/common.proto";

option go_package = "github.com/smartcontractkit/chainlink-protos/chainlink-ccv/go/v1";

service MessageDiscovery {
  rpc GetMessagesSince(GetMessagesSinceRequest) returns (GetMessagesSinceResponse);
}

message VerifierResultWithSequence {  
  // Verifier result contains the message data and required verification data from the committee verifier  
  VerifierResult verifierResult = 1;  
  // Monotonic sequence number assigned by the verifier result API. Can be used to query for new messages since a given sequence.  
  int64 sequence = 2;  
}

message GetMessagesSinceRequest {
    int64 sinceSequence = 1;
}

message GetMessagesSinceResponse {
    repeated VerifierResultWithSequence results = 1;
}
