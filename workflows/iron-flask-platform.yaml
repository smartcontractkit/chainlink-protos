---
beholder:
  domain: platform
  schemas:
    - entity: WorkflowMetadata
      schema: "workflows/v1/metadata.proto"
      references:
        - name: "workflows/v1/trigger_detail.proto"
          subject: "beholder__platform__messages-workflows.v1.TriggerDetail"
          version: 1

    - entity: CapabilityExecutionFinished
      schema: "workflows/v1/capability_finished.proto"
      references:
        - name: "workflows/v1/metadata.proto"
          subject: "beholder__platform__messages-workflows.v1.WorkflowMetadata"
          version: 1

    - entity: CapabilityExecutionStarted
      schema: "workflows/v1/capability_started.proto"
      references:
        - name: "workflows/v1/metadata.proto"
          subject: "beholder__platform__messages-workflows.v1.WorkflowMetadata"
          version: 1

    - entity: MeteringReport
      schema: "workflows/v1/metering.proto"
      references:
        - name: "workflows/v1/metadata.proto"
          subject: "beholder__platform__messages-workflows.v1.WorkflowMetadata"
          version: 1

    - entity: TransmissionsScheduledEvent
      schema: "workflows/v1/transmissions_scheduled_event.proto"

    - entity: TransmitScheduleEvent
      schema: "workflows/v1/transmit_schedule_event.proto"

    - entity: WorkflowExecutionFinished
      schema: "workflows/v1/workflow_finished.proto"
      references:
        - name: "workflows/v1/metadata.proto"
          subject: "beholder__platform__messages-workflows.v1.WorkflowMetadata"
          version: 1

    - entity: WorkflowExecutionStarted
      schema: "workflows/v1/workflow_started.proto"
      references:
        - name: "workflows/v1/metadata.proto"
          subject: "beholder__platform__messages-workflows.v1.WorkflowMetadata"
          version: 1

    - entity: WorkflowStatusChanged
      schema: "workflows/v1/workflow_status_changed.proto"
      references:
        - name: "workflows/v1/metadata.proto"
          subject: "beholder__platform__messages-workflows.v1.WorkflowMetadata"
          version: 1

    - entity: BaseMessage
      schema: "common/v1/base_message.proto"
    
    - entity: BaseMessage
      schema: "pb/base_message_legacy.proto"

    - entity: TriggerDetail
      schema: "workflows/v1/trigger_detail.proto"

    - entity: UserLogs
      schema: "workflows/v1/user_logs.proto"
      references:
        - name: "workflows/v1/metadata.proto"
          subject: "beholder__platform__messages-workflows.v1.WorkflowMetadata"
          version: 1

    # workflows/v2

    - entity: CreInfo
      schema: "workflows/v2/cre_info.proto"

    - entity: WorkflowKey
      schema: "workflows/v2/workflow_key.proto"

    - entity: NeverSendThis
      schema: "workflows/v2/xxx_no_send.proto"

    - entity: TransactionInfo
      schema: "workflows/v2/transaction_info.proto"

    - entity: Workflow
      schema: "workflows/v2/workflow.proto"
      references:
        - name: "workflows/v2/workflow_key.proto"
          subject: "beholder__platform__messages-workflows.v2.WorkflowKey"
          version: 1

    - entity: CapabilityExecutionFinished
      schema: "workflows/v2/capability_execution_finished.proto"
      references:
        - name: "workflows/v2/cre_info.proto"
          subject: "beholder__platform__messages-workflows.v2.CreInfo"
          version: 1
        - name: "workflows/v2/workflow_key.proto"
          subject: "beholder__platform__messages-workflows.v2.WorkflowKey"
          version: 1
        # This is a hack to add reference to ExecutionStatus enum
        - name: "workflows/v2/xxx_no_send.proto"
          subject: "beholder__platform__messages-workflows.v2.NeverSendThis"
          version: 1

    - entity: CapabilityExecutionStarted
      schema: "workflows/v2/capability_execution_started.proto"
      references:
        - name: "workflows/v2/cre_info.proto"
          subject: "beholder__platform__messages-workflows.v2.CreInfo"
          version: 1
        - name: "workflows/v2/workflow_key.proto"
          subject: "beholder__platform__messages-workflows.v2.WorkflowKey"
          version: 1

    - entity: TriggerExecutionStarted
      schema: "workflows/v2/trigger_execution_started.proto"
      references:
        - name: "workflows/v2/cre_info.proto"
          subject: "beholder__platform__messages-workflows.v2.CreInfo"
          version: 1
        - name: "workflows/v2/workflow_key.proto"
          subject: "beholder__platform__messages-workflows.v2.WorkflowKey"
          version: 1

    - entity: WorkflowExecutionFinished
      schema: "workflows/v2/workflow_execution_finished.proto"
      references:
        - name: "workflows/v2/cre_info.proto"
          subject: "beholder__platform__messages-workflows.v2.CreInfo"
          version: 1
        - name: "workflows/v2/workflow_key.proto"
          subject: "beholder__platform__messages-workflows.v2.WorkflowKey"
          version: 1
        # This is a hack to add reference to ExecutionStatus enum
        - name: "workflows/v2/xxx_no_send.proto"
          subject: "beholder__platform__messages-workflows.v2.NeverSendThis"
          version: 1

    - entity: WorkflowExecutionStarted
      schema: "workflows/v2/workflow_execution_started.proto"
      references:
        - name: "workflows/v2/cre_info.proto"
          subject: "beholder__platform__messages-workflows.v2.CreInfo"
          version: 1
        - name: "workflows/v2/workflow_key.proto"
          subject: "beholder__platform__messages-workflows.v2.WorkflowKey"
          version: 1

    - entity: WorkflowActivated
      schema: "workflows/v2/workflow_activated.proto"
      references:
        - name: "workflows/v2/cre_info.proto"
          subject: "beholder__platform__messages-workflows.v2.CreInfo"
          version: 1
        - name: "workflows/v2/transaction_info.proto"
          subject: "beholder__platform__messages-workflows.v2.TransactionInfo"
          version: 1
        - name: "workflows/v2/workflow.proto"
          subject: "beholder__platform__messages-workflows.v2.Workflow"
          version: 1

    - entity: WorkflowDeleted
      schema: "workflows/v2/workflow_deleted.proto"
      references:
        - name: "workflows/v2/cre_info.proto"
          subject: "beholder__platform__messages-workflows.v2.CreInfo"
          version: 1
        - name: "workflows/v2/transaction_info.proto"
          subject: "beholder__platform__messages-workflows.v2.TransactionInfo"
          version: 1
        - name: "workflows/v2/workflow.proto"
          subject: "beholder__platform__messages-workflows.v2.Workflow"
          version: 1

    - entity: WorkflowDeployed
      schema: "workflows/v2/workflow_deployed.proto"
      references:
        - name: "workflows/v2/cre_info.proto"
          subject: "beholder__platform__messages-workflows.v2.CreInfo"
          version: 1
        - name: "workflows/v2/transaction_info.proto"
          subject: "beholder__platform__messages-workflows.v2.TransactionInfo"
          version: 1
        - name: "workflows/v2/workflow.proto"
          subject: "beholder__platform__messages-workflows.v2.Workflow"
          version: 1

    - entity: WorkflowPaused
      schema: "workflows/v2/workflow_paused.proto"
      references:
        - name: "workflows/v2/cre_info.proto"
          subject: "beholder__platform__messages-workflows.v2.CreInfo"
          version: 1
        - name: "workflows/v2/transaction_info.proto"
          subject: "beholder__platform__messages-workflows.v2.TransactionInfo"
          version: 1
        - name: "workflows/v2/workflow.proto"
          subject: "beholder__platform__messages-workflows.v2.Workflow"
          version: 1

    - entity: WorkflowUpdated
      schema: "workflows/v2/workflow_updated.proto"
      references:
        - name: "workflows/v2/cre_info.proto"
          subject: "beholder__platform__messages-workflows.v2.CreInfo"
          version: 1
        - name: "workflows/v2/transaction_info.proto"
          subject: "beholder__platform__messages-workflows.v2.TransactionInfo"
          version: 1
        - name: "workflows/v2/workflow.proto"
          subject: "beholder__platform__messages-workflows.v2.Workflow"
          version: 1

    - entity: WorkflowUserLog
      schema: "workflows/v2/workflow_user_log.proto"
      references:
        - name: "workflows/v2/cre_info.proto"
          subject: "beholder__platform__messages-workflows.v2.CreInfo"
          version: 1
        - name: "workflows/v2/workflow_key.proto"
          subject: "beholder__platform__messages-workflows.v2.WorkflowKey"
          version: 1

    # DATA-FEEDS
    - entity: JobInfo
      schema: "bridge_status/v1/job_info.proto"
    
    - entity: RuntimeInfo
      schema: "bridge_status/v1/runtime_info.proto"
    
    - entity: MetricsInfo
      schema: "bridge_status/v1/metrics_info.proto"
    
    - entity: EndpointInfo
      schema: "bridge_status/v1/endpoint_info.proto"
    
    - entity: ConfigurationItem
      schema: "bridge_status/v1/configuration_item.proto"
    
    # bridge_status/v1 - Main event
    - entity: BridgeStatusEvent
      schema: "bridge_status/v1/bridge_status_event.proto"
      references:
        - name: "bridge_status/v1/job_info.proto"
          subject: "platform-bridge_status.v1.JobInfo"
          version: 1
        - name: "bridge_status/v1/runtime_info.proto"
          subject: "platform-bridge_status.v1.RuntimeInfo"
          version: 1
        - name: "bridge_status/v1/metrics_info.proto"
          subject: "platform-bridge_status.v1.MetricsInfo"
          version: 1
        - name: "bridge_status/v1/endpoint_info.proto"
          subject: "platform-bridge_status.v1.EndpointInfo"
          version: 1
        - name: "bridge_status/v1/configuration_item.proto"
          subject: "platform-bridge_status.v1.ConfigurationItem"
          version: 1